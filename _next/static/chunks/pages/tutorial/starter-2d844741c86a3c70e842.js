(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[248],{2167:function(e,t,n){"use strict";var r=n(3848),o=n(9448);t.default=void 0;var a=o(n(7294)),s=n(9414),i=n(4651),l=n(7426),c={};function d(e,t,n,r){if(e&&(0,s.isLocalURL)(t)){e.prefetch(t,n,r).catch((function(e){0}));var o=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;c[t+"%"+n+(o?"%"+o:"")]=!0}}var u=function(e){var t,n=!1!==e.prefetch,o=(0,i.useRouter)(),u=a.default.useMemo((function(){var t=(0,s.resolveHref)(o,e.href,!0),n=r(t,2),a=n[0],i=n[1];return{href:a,as:e.as?(0,s.resolveHref)(o,e.as):i||a}}),[o,e.href,e.as]),h=u.href,f=u.as,p=e.children,g=e.replace,m=e.shallow,v=e.scroll,b=e.locale;"string"===typeof p&&(p=a.default.createElement("a",null,p));var _=(t=a.Children.only(p))&&"object"===typeof t&&t.ref,x=(0,l.useIntersection)({rootMargin:"200px"}),y=r(x,2),j=y[0],w=y[1],k=a.default.useCallback((function(e){j(e),_&&("function"===typeof _?_(e):"object"===typeof _&&(_.current=e))}),[_,j]);(0,a.useEffect)((function(){var e=w&&n&&(0,s.isLocalURL)(h),t="undefined"!==typeof b?b:o&&o.locale,r=c[h+"%"+f+(t?"%"+t:"")];e&&!r&&d(o,h,f,{locale:t})}),[f,h,w,b,n,o]);var T={ref:k,onClick:function(e){t.props&&"function"===typeof t.props.onClick&&t.props.onClick(e),e.defaultPrevented||function(e,t,n,r,o,a,i,l){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,s.isLocalURL)(n))&&(e.preventDefault(),null==i&&r.indexOf("#")>=0&&(i=!1),t[o?"replace":"push"](n,r,{shallow:a,locale:l,scroll:i}))}(e,o,h,f,g,m,v,b)},onMouseEnter:function(e){(0,s.isLocalURL)(h)&&(t.props&&"function"===typeof t.props.onMouseEnter&&t.props.onMouseEnter(e),d(o,h,f,{priority:!0}))}};if(e.passHref||"a"===t.type&&!("href"in t.props)){var R="undefined"!==typeof b?b:o&&o.locale,B=o&&o.isLocaleDomain&&(0,s.getDomainLocale)(f,R,o&&o.locales,o&&o.domainLocales);T.href=B||(0,s.addBasePath)((0,s.addLocale)(f,R,o&&o.defaultLocale))}return a.default.cloneElement(t,T)};t.default=u},7426:function(e,t,n){"use strict";var r=n(3848);t.__esModule=!0,t.useIntersection=function(e){var t=e.rootMargin,n=e.disabled||!s,l=(0,o.useRef)(),c=(0,o.useState)(!1),d=r(c,2),u=d[0],h=d[1],f=(0,o.useCallback)((function(e){l.current&&(l.current(),l.current=void 0),n||u||e&&e.tagName&&(l.current=function(e,t,n){var r=function(e){var t=e.rootMargin||"",n=i.get(t);if(n)return n;var r=new Map,o=new IntersectionObserver((function(e){e.forEach((function(e){var t=r.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return i.set(t,n={id:t,observer:o,elements:r}),n}(n),o=r.id,a=r.observer,s=r.elements;return s.set(e,t),a.observe(e),function(){s.delete(e),a.unobserve(e),0===s.size&&(a.disconnect(),i.delete(o))}}(e,(function(e){return e&&h(e)}),{rootMargin:t}))}),[n,t,u]);return(0,o.useEffect)((function(){if(!s&&!u){var e=(0,a.requestIdleCallback)((function(){return h(!0)}));return function(){return(0,a.cancelIdleCallback)(e)}}}),[u]),[f,u]};var o=n(7294),a=n(3447),s="undefined"!==typeof IntersectionObserver;var i=new Map},1536:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(5893),o=n(7317);function a(e){var t=e.lang,n=e.value;return void 0===t&&(t="text"),void 0===n&&(n="Hello World"),(0,r.jsx)(o.Z,{language:t,customStyle:"",useInlineStyles:!1,children:n})}},2833:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n(5893),o=n(3679),a=n.n(o),s=n(1664),i=n(237);function l(){return(0,r.jsx)("footer",{className:a().footer,children:(0,r.jsxs)("section",{className:a().section,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.default,{src:"/wordmark.svg"}),(0,r.jsx)(s.default,{href:"https://github.com/tfukaza/harvest/issues/new?assignees=&labels=bug&template=bug_report.md&title=%5B%F0%9F%AA%B0BUG%5D",children:"Report a Bug"}),(0,r.jsx)(s.default,{href:"https://github.com/tfukaza/harvest/issues/new?assignees=&labels=enhancement%2C+question&template=feature-request.md&title=%5B%F0%9F%92%A1Feature+Request%5D",children:"Suggest a Feature"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"Special thanks to these projects:"}),(0,r.jsx)(s.default,{href:"https://github.com/jmfernandes/robin_stocks",children:"robin_stocks"})]})]})})}},4705:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(5893),o=n(3679),a=n.n(o),s=n(5016),i=n.n(s),l=n(1664),c=n(237);function d(){return(0,r.jsxs)("nav",{className:a().nav,children:[(0,r.jsx)("div",{children:(0,r.jsx)(l.default,{href:"/",passHref:!0,children:(0,r.jsx)("a",{id:a().logo,children:(0,r.jsx)(c.default,{src:"/wordmark.svg"})})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.default,{href:"/tutorial",children:(0,r.jsx)("a",{children:"Tutorials"})}),(0,r.jsx)(l.default,{href:"/docs",children:(0,r.jsx)("a",{children:"Docs"})})]}),(0,r.jsx)("div",{children:(0,r.jsx)(l.default,{href:"https://github.com/tfukaza/harvest",children:(0,r.jsx)("a",{className:"".concat(i().button," ").concat(a().github),children:"GitHub"})})})]})}},7718:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(5893),o=n(4705),a=n(6793),s=n(2833),i=n(1536),l=n(3679),c=n.n(l);function d(){return(0,r.jsxs)("div",{className:c().container,children:[(0,r.jsx)(a.default,{title:"Harvest | Tutorials"}),(0,r.jsx)(o.default,{}),(0,r.jsxs)("main",{className:c().main,children:[(0,r.jsx)("section",{}),(0,r.jsx)("section",{className:c().section,children:(0,r.jsxs)("div",{className:c().text,children:[(0,r.jsx)("h1",{children:"Startup Guide"}),(0,r.jsx)("h2",{children:"Prerequisites"}),(0,r.jsx)("p",{children:"Before we begin, make sure you have the following:"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"Python, version 3.8 or higher."}),(0,r.jsx)("li",{children:"A code editing software."}),(0,r.jsx)("li",{children:"An account for a brokerage. In this tutorial we will be using Robinhood."}),(0,r.jsx)("li",{children:"Basic coding skills. If you've written anything more than 'Hello World', you should be good to go."})]}),(0,r.jsx)("h2",{children:"Installing"}),(0,r.jsx)("p",{children:"First things first, let's install the library. "}),(0,r.jsx)(i.default,{lang:"bash",value:"pip install -e 'git+https://github.com/tfukaza/harvest.git#egg=harvest'"}),(0,r.jsx)("p",{children:"Next, we install additional libraries depending on which broker you want to use. Harvest will do this automatically, using the following command:"}),(0,r.jsx)(i.default,{lang:"bash",value:"pip install -e 'git+https://github.com/tfukaza/harvest.git#egg=harvest[BROKER]'"}),(0,r.jsx)("p",{children:"Where BROKER is replaced by one of the following brokers supported by Harvest:"}),(0,r.jsx)("ul",{children:(0,r.jsx)("li",{children:"Robinhood"})}),(0,r.jsx)("h2",{children:"Example Code"}),(0,r.jsx)("p",{children:"Once you have everything installed, we are ready to begin writing the code. For this example we will use Robinhood, but the code is still mostly the same if you decide to use other brokers. Before we begin, there are three components of Harvest you need to know:"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"Trader: The main module responsible for managing the other modules."}),(0,r.jsx)("li",{children:"Broker: The module that communicates with the brokerage you are using."}),(0,r.jsx)("li",{children:"Algo: The module where you define your algorithm."})]}),(0,r.jsx)("p",{children:"We begin coding by import the aforementioned components, or 'modules' as they are called in Python."}),(0,r.jsx)(i.default,{lang:"python",value:"from harvest.algo import BaseAlgo\nfrom harvest.trader import Trader\nfrom harvest.broker.robinhood import RobinhoodBroker"}),(0,r.jsx)("p",{children:"Then we create a Trader, which will be the starting point of Harvest"}),(0,r.jsx)(i.default,{lang:"python",value:'if __name__ == "__main__":\nt = Trader( RobinhoodBroker() )'}),(0,r.jsx)("p",{children:"Few things happen here, and don't worry, this is as complex as Harvest will get (for now). The trader class is instantiated. Traders take two Brokers as input, a streamer and a broker. streamer is the broker used to retrieve stock/cryto data. broker is the brokerage used to place orders and manage your portfolio. For this example, we initialize RobinhoodBroker. The broker automatically reads the credentials saved in secret.yaml and sets up a connection with the broker. The Robinhood broker is specified as a streamer and will be used to get stock/crypto data. If the broker is unspecified, Robinhood will also be used as a broker. Fortunately after this, things get pretty easy. We specify what stock to track, in this case Twitter (TWTR)."}),(0,r.jsx)(i.default,{lang:"python",value:"t.add_symbol('TWTR')"}),(0,r.jsx)("p",{children:"At this point, we define our algorithm. Algorithms are created by extending the BaseAlgo class."}),(0,r.jsx)(i.default,{lang:"python",value:"class Twitter(BaseAlgo):\n                    def algo_init(self):\n                        pass\n\n                    def handler(self, meta):\n                        pass"}),(0,r.jsx)("p",{children:"every Algo must define two functions algo_init: Function called right before the algorithm starts handler: Function called at a specified interval. In this example, we create a simple algorithm that buys and sells a single stock."}),(0,r.jsx)(i.default,{lang:"python",value:"class Twitter(BaseAlgo):\n    def algo_init(self):\n        self.hold = False\n\n    def handler(self, meta):\n        if self.hold:\n            self.sell('TWTR', 1)\n            self.hold = False\n        else:\n            self.buy('TWTR', 1)\n            self.hold = True"}),(0,r.jsx)("p",{children:"Finally, we tell the trader to use this algorithm, and run it. Below is the final code after putting everything together."}),(0,r.jsx)(i.default,{lang:"python",value:"from harvest.algo import BaseAlgo\nfrom harvest.trader import Trader\nfrom harvest.broker.robinhood import RobinhoodBroker\n\nclass Twitter(BaseAlgo):\n    def algo_init(self):\n        self.hold = False\n\n    def handler(self, meta):\n        if self.hold:\n            self.sell('TWTR', 1)    \n            self.hold = False\n        else:\n            self.buy('TWTR', 1)\n            self.hold = True\n\nif __name__ == \"__main__\":\n    t = Trader( RobinhoodBroker(), None )\n    t.add_symbol('TWTR')\n    t.set_algo(Twitter())\n    t.run(interval='1DAY')"}),(0,r.jsx)("p",{children:"By specifying interval='1DAY' in run, the handler function will be called once every day."}),(0,r.jsx)("p",{children:"Now run the code. If this is the first time connecting to Robinhood, you should see a setup wizard pop up. Follow the steps to set up login credentials for Robinhood."})]})})]}),(0,r.jsx)(s.default,{})]})}},7394:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorial/starter",function(){return n(7718)}])},5016:function(e){e.exports={button:"rowcrop_button__1n6eZ",card:"rowcrop_card__25eqx",col4:"rowcrop_col4__2ZQay"}},3679:function(e){e.exports={container:"Home_container__3sao-",main:"Home_main__1Z1aG",nav:"Home_nav__2iapp",logo:"Home_logo__3GqVp",github:"Home_github__3XEl-",landing:"Home_landing__2U_o4",section:"Home_section__354aW",text:"Home_text__dq4ii",button:"Home_button__2hScn",col_card:"Home_col_card__6BIVE",col4:"Home_col4__2OXKu",footer:"Home_footer__2v49s"}},1664:function(e,t,n){e.exports=n(2167)}},function(e){e.O(0,[317,793,774,888,179],(function(){return t=7394,e(e.s=t);var t}));var t=e.O();_N_E=t}]);